---
interface Props {
  label: string;
  score: number;        // 0-10
  color?: string;       // CSS color
  maxScore?: number;
}

const { label, score, color = 'var(--brand-500)', maxScore = 10 } = Astro.props;
const pct = Math.min(100, Math.max(0, (score / maxScore) * 100));

// 分数颜色映射
function scoreColor(s: number): string {
  if (s >= 9) return '#22c55e';
  if (s >= 7) return '#6366f1';
  if (s >= 5) return '#f59e0b';
  return '#ef4444';
}

const fillColor = color === 'auto' ? scoreColor(score) : color;
---

<div class="flex items-center gap-3 text-xs">
  <span class="w-16 text-[var(--text-muted)] shrink-0">{label}</span>
  <div class="score-bar flex-1">
    <div
      class="score-bar-fill"
      style={`width: ${pct}%; background: ${fillColor};`}
    ></div>
  </div>
  <span class="w-8 text-right font-medium" style={`color: ${fillColor}`}>
    {score.toFixed(1)}
  </span>
</div>
