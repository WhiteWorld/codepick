---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getAllTools } from '../../lib/data';

const allTools = getAllTools();
const siteUrl = 'https://codepick.dev';

// æŒ‰ç¼–ç¨‹èƒ½åŠ›é™åºæ’åˆ—
const tools = [...allTools].sort((a, b) => (b.scores.coding_ability ?? 0) - (a.scores.coding_ability ?? 0));

const typeLabel: Record<string, string> = {
  ide:         'IDE',
  cli:         'CLI',
  plugin:      'æ’ä»¶',
  client:      'å®¢æˆ·ç«¯',
  web:         'Web',
  app:         'App',
  cloud_agent: 'äº‘ç«¯ Agent',
};

function priceLabel(tool: any): string {
  const plans = tool.pricing?.plans || [];
  const free = plans.find((p: any) => p.price === 0);
  const paid = plans.find((p: any) => typeof p.price === 'number' && p.price > 0);
  if (free && paid) return `å…è´¹ / $${paid.price}èµ·`;
  if (free) return 'å…è´¹';
  if (paid) {
    const currency = tool.pricing?.currency === 'CNY' ? 'Â¥' : '$';
    return `${currency}${paid.price}/æœˆ`;
  }
  return 'æŒ‰é‡è®¡è´¹';
}

function scoreColor(score: number): string {
  if (score >= 8.5) return 'text-green-400';
  if (score >= 7) return 'text-[var(--brand-400)]';
  if (score >= 5) return 'text-yellow-400';
  return 'text-red-400';
}

const jsonLd = {
  '@context': 'https://schema.org',
  '@type': 'ItemList',
  name: '2026 AI ç¼–ç¨‹å·¥å…·å…¨æ™¯å›¾',
  description: 'æ‰€æœ‰ä¸»æµ AI ç¼–ç¨‹å·¥å…·æ¨ªå‘å¯¹æ¯”ï¼šç¼–ç¨‹èƒ½åŠ›ã€æ€§ä»·æ¯”ã€çµæ´»æ€§ã€å›½å†…å¯ç”¨æ€§è¯„åˆ†',
  url: `${siteUrl}/tools/overview`,
  numberOfItems: tools.length,
  itemListElement: tools.map((t, i) => ({
    '@type': 'ListItem',
    position: i + 1,
    name: t.name,
    url: `${siteUrl}/tool/${t.id}`,
  })),
};

const breadcrumb = {
  '@context': 'https://schema.org',
  '@type': 'BreadcrumbList',
  itemListElement: [
    { '@type': 'ListItem', position: 1, name: 'é¦–é¡µ', item: siteUrl },
    { '@type': 'ListItem', position: 2, name: 'å·¥å…·åº“', item: `${siteUrl}/tools` },
    { '@type': 'ListItem', position: 3, name: 'å…¨æ™¯å›¾', item: `${siteUrl}/tools/overview` },
  ],
};
---

<BaseLayout
  title={`2026 AI ç¼–ç¨‹å·¥å…·å…¨æ™¯å›¾ï¼š${tools.length} æ¬¾å·¥å…·æ¨ªå‘å¯¹æ¯” | CodePick`}
  description={`${tools.length} æ¬¾ AI ç¼–ç¨‹å·¥å…·å…¨é¢æ¨ªå‘å¯¹æ¯”ï¼šCursorã€Copilotã€Claude Codeã€Trae CNã€Windsurfã€Gemini CLI ç­‰ï¼Œç¼–ç¨‹èƒ½åŠ›ã€å®šä»·ã€å›½å†…å¯ç”¨æ€§ä¸€è§ˆã€‚`}
  jsonLd={[jsonLd, breadcrumb]}
>
  <section class="container py-12">
    <!-- Breadcrumb -->
    <nav class="text-xs text-[var(--text-muted)] mb-6">
      <a href="/" class="hover:text-white no-underline">é¦–é¡µ</a>
      <span class="mx-1">/</span>
      <a href="/tools" class="hover:text-white no-underline">å·¥å…·åº“</a>
      <span class="mx-1">/</span>
      <span class="text-[var(--text-secondary)]">å…¨æ™¯å›¾</span>
    </nav>

    <h1 class="text-3xl font-bold text-white mb-3">ğŸ—ºï¸ 2026 AI ç¼–ç¨‹å·¥å…·å…¨æ™¯å›¾</h1>
    <p class="text-[var(--text-secondary)] mb-2 max-w-2xl">
      {tools.length} æ¬¾ä¸»æµ AI ç¼–ç¨‹å·¥å…·æ¨ªå‘è¯„åˆ†å¯¹æ¯”ï¼ŒæŒ‰ç¼–ç¨‹èƒ½åŠ›æ’åºã€‚ç‚¹å‡»å·¥å…·åæŸ¥çœ‹è¯¦ç»†è¯„æµ‹ã€‚
    </p>
    <p class="text-xs text-[var(--text-muted)] mb-8">
      è¯„åˆ†ç»´åº¦ï¼šç¼–ç¨‹èƒ½åŠ› / æ€§ä»·æ¯” / çµæ´»æ€§ / å›½å†…ä½“éªŒï¼Œæ»¡åˆ† 10 åˆ†ã€‚æ•°æ®æŒç»­æ›´æ–°ã€‚
    </p>

    <!-- Score legend -->
    <div class="flex flex-wrap gap-4 mb-6 text-xs">
      <span class="text-green-400">â— â‰¥ 8.5 ä¼˜ç§€</span>
      <span class="text-[var(--brand-400)]">â— â‰¥ 7 è‰¯å¥½</span>
      <span class="text-yellow-400">â— â‰¥ 5 ä¸€èˆ¬</span>
      <span class="text-red-400">â— &lt; 5 è¾ƒå·®</span>
    </div>

    <!-- Main table -->
    <div class="overflow-x-auto mb-12">
      <table class="compare-table w-full text-sm">
        <thead>
          <tr>
            <th class="text-left">å·¥å…·</th>
            <th>ç±»å‹</th>
            <th>å®šä»·</th>
            <th>ç¼–ç¨‹èƒ½åŠ›</th>
            <th>æ€§ä»·æ¯”</th>
            <th>çµæ´»æ€§</th>
            <th>å›½å†…ä½“éªŒ</th>
          </tr>
        </thead>
        <tbody>
          {tools.map(tool => (
            <tr>
              <td>
                <a href={`/tool/${tool.id}`} class="text-[var(--brand-400)] no-underline hover:underline font-medium">
                  {tool.name}
                </a>
              </td>
              <td class="text-center">
                <span class="tag text-xs">{typeLabel[(tool as any).type] || (tool as any).type}</span>
              </td>
              <td class="text-center text-[var(--text-muted)] text-xs">{priceLabel(tool as any)}</td>
              <td class={`text-center font-bold ${scoreColor((tool as any).scores.coding_ability ?? 0)}`}>
                {(tool as any).scores.coding_ability ?? 'â€”'}
              </td>
              <td class={`text-center font-bold ${scoreColor((tool as any).scores.cost_efficiency ?? 0)}`}>
                {(tool as any).scores.cost_efficiency ?? 'â€”'}
              </td>
              <td class={`text-center font-bold ${scoreColor((tool as any).scores.flexibility ?? 0)}`}>
                {(tool as any).scores.flexibility ?? 'â€”'}
              </td>
              <td class={`text-center font-bold ${scoreColor((tool as any).scores.china_friendly ?? 0)}`}>
                {(tool as any).scores.china_friendly ?? 'â€”'}
              </td>
            </tr>
          ))}
        </tbody>
      </table>
    </div>

    <!-- é€‰å‹å†³ç­–æ ‘ -->
    <div class="mb-12">
      <h2 class="text-xl font-bold text-white mb-6 mt-0">ğŸ§­ 30 ç§’é€‰å‹å†³ç­–æ ‘</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">

        <div class="card p-5 border-l-4 border-green-500">
          <p class="text-xs text-[var(--text-muted)] mb-1">å›½å†…ç”¨æˆ· Â· é›¶æˆæœ¬å…¥é—¨</p>
          <p class="text-base font-bold text-white mb-2">ğŸ‘‰ Trae CN</p>
          <p class="text-xs text-[var(--text-secondary)] m-0">å­—èŠ‚å‡ºå“ï¼Œå…è´¹ï¼Œå›½å†…ç›´è¿ï¼Œè±†åŒ…/DeepSeek/Kimi å…¨å¥—</p>
        </div>

        <div class="card p-5 border-l-4 border-[var(--brand-400)]">
          <p class="text-xs text-[var(--text-muted)] mb-1">å›½å†…ç”¨æˆ· Â· VS Code æ’ä»¶</p>
          <p class="text-base font-bold text-white mb-2">ğŸ‘‰ Cline + ç«å±±æ–¹èˆŸ</p>
          <p class="text-xs text-[var(--text-secondary)] m-0">Â¥9.9/æœˆï¼ŒAgent èƒ½åŠ›å¼ºï¼Œæ”¯æŒè‡ªå®šä¹‰æ¨¡å‹</p>
        </div>

        <div class="card p-5 border-l-4 border-purple-500">
          <p class="text-xs text-[var(--text-muted)] mb-1">æµ·å¤–ç”¨æˆ· Â· æœ€å¼ºç¼–ç¨‹ä½“éªŒ</p>
          <p class="text-base font-bold text-white mb-2">ğŸ‘‰ Cursor Pro</p>
          <p class="text-xs text-[var(--text-secondary)] m-0">$20/æœˆï¼ŒClaude Opus + GPT-5ï¼Œå¸‚å ç‡ç¬¬ä¸€</p>
        </div>

        <div class="card p-5 border-l-4 border-blue-500">
          <p class="text-xs text-[var(--text-muted)] mb-1">æµ·å¤–ç”¨æˆ· Â· çœé’±æ›¿ä»£</p>
          <p class="text-base font-bold text-white mb-2">ğŸ‘‰ Windsurf Pro</p>
          <p class="text-xs text-[var(--text-secondary)] m-0">$15/æœˆï¼ŒCascade ä½“éªŒç‹¬ç‰¹ï¼Œæ”¯æŒ JetBrains</p>
        </div>

        <div class="card p-5 border-l-4 border-yellow-500">
          <p class="text-xs text-[var(--text-muted)] mb-1">ç»ˆç«¯å…š Â· å…è´¹é¦–é€‰</p>
          <p class="text-base font-bold text-white mb-2">ğŸ‘‰ Gemini CLI</p>
          <p class="text-xs text-[var(--text-secondary)] m-0">å®Œå…¨å…è´¹ï¼Œ1000 æ¬¡/å¤©ï¼ŒGemini 2.5 Pro ç™¾ä¸‡ token</p>
        </div>

        <div class="card p-5 border-l-4 border-orange-500">
          <p class="text-xs text-[var(--text-muted)] mb-1">ä»£ç è´¨é‡ä¼˜å…ˆ Â· ä¸åœ¨ä¹æˆæœ¬</p>
          <p class="text-base font-bold text-white mb-2">ğŸ‘‰ Claude Code Max</p>
          <p class="text-xs text-[var(--text-secondary)] m-0">$100-200/æœˆï¼ŒClaude Opus æ— é™é¢åº¦ï¼Œè´¨é‡å¤©èŠ±æ¿</p>
        </div>

      </div>
    </div>

    <!-- Category links -->
    <div class="mb-8">
      <h2 class="text-xl font-bold text-white mb-4 mt-0">ğŸ—‚ï¸ æŒ‰åœºæ™¯ç­›é€‰</h2>
      <div class="flex flex-wrap gap-3">
        <a href="/tools/free" class="btn btn-ghost text-sm no-underline">ğŸ’° å…è´¹å·¥å…·</a>
        <a href="/tools/china" class="btn btn-ghost text-sm no-underline">ğŸ‡¨ğŸ‡³ å›½å†…å¯ç”¨</a>
        <a href="/tools/vscode" class="btn btn-ghost text-sm no-underline">ğŸ”µ VS Code ç”Ÿæ€</a>
        <a href="/tools/terminal" class="btn btn-ghost text-sm no-underline">âŒ¨ï¸ ç»ˆç«¯å·¥å…·</a>
        <a href="/tools" class="btn btn-ghost text-sm no-underline">ğŸ“‹ å…¨éƒ¨å·¥å…·</a>
      </div>
    </div>

    <div class="text-center text-xs text-[var(--text-muted)]">
      æ•°æ®æœ‰è¯¯ï¼Ÿ<a href="https://github.com/WhiteWorld/codepick/issues/new" target="_blank" rel="noopener" class="text-[var(--brand-400)] no-underline hover:underline">æäº¤ Issue â†’</a>
    </div>
  </section>
</BaseLayout>
